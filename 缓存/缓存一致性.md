### 缓存一致性



**三种一致性策略**

- 对于关系型数据库，要求更新过的数据能被后续的访问都能看到，这是**强一致性**。

- 如果能容忍后续的部分或者全部访问不到，则是**弱一致性**。

- 如果经过一段时间后要求能访问到更新后的数据，则是*最终一致性。





Redis因为是读写速度非常快的NoSQL数据库，常常用来作为缓存加快读写速度。但是缓存数据和数据库数据之间存在不一致，所以需要一些策略来保证缓存一致性



缓存的读流程：

![image-20210809131206005](C:\Users\皮卡丘\AppData\Roaming\Typora\typora-user-images\image-20210809131206005.png)



**首先，可以给出一个结论，不管是哪种方案，如果在写操作时不给缓存加锁，那么就得不到强一致性**

##### 为什么不加锁就保证不了强一致性？

- 因为不加锁就保证不了数据库的更新与缓存的更新这两个过程是原子的，那么自然得不到强一致性



#### 几种缓存一致性方案

##### 先更新数据库，再更新缓存

##### 先更新数据库，再删除缓存

