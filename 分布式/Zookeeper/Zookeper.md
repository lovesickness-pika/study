### Zookeeper

- Zookeeper为分布式应用提供了高效且可靠的分布式协调服务，提供了诸如命名服务、配置管理和分布式锁等分布式的基础服务



#### Zookeeper保证的分布式一致性特性

1. 顺序一致性：从同一个客户端发起的事务请求，最终会严格地按照其发起顺序被应用到Zookeeper
2. 原子性：所有事务请求的处理结果在整个集群的机器上的应用情况是一致的
3. 单一视图：无论客户端连接的是哪个Zookeeper服务器，其看到的数据模型是一致的
4. 可靠性：服务端一旦应用了一个事务，该事务引起的变更会保留下来
5. 实时性：Zookeeper保证在一定时间内，客户端最终能够从服务端读取到最新的数据状态



#### Zookeeper的设计目标

##### 简单的数据模型

- Zookeeper使得分布式程序能够通过一个共享的、树形结构的命名空间进行相互协调
- Zookeeper将全量数据存储在内存中

##### 可以构建集群

- Zookeeper集群的每台机器都会在内存中维护当前的服务器状态，并与其它机器都保持着通信。
- 只要有一半以上机器正常运行，整个集群正常工作
- Zookeeper会随机连接集群中的一台机器，当该机器的连接断开时，会自动重连其它机器

##### 顺序访问

- 对于客户端的更新请求，Zookeeper会分配全局唯一的递增编号

##### 高性能

- Zookeeper将全量数据存储在内存，并直接服务于客户端的所有非事务请求，因此特别适合以读操作为主的应用场景





#### Zookeeper的集群角色

- Zookeeper引入了**Leader**、**Follower**和**Observer**三种角色，其中Leader是由集群选举出来的，负责为客户端提供写服务和读服务，而Follower和Observer都能为客户端提供读服务，不同的是Observer不参与过半写成功策略，也就是说，Observer可以在不影响写性能的情况下提高集群的读性能