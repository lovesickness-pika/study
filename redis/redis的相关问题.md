### redis为什么使用单线程

- 首先，应用程序并非一定是使用多线程就会更快；单线程的程序由于不需要考虑线程上下文切换和没有线程同步问题，使用多线程往往的原因一般是想要提高cpu利用率，尤其是io密集型的程序中；而redis是完全基于内存操作的，按照官方的说法是cpu不会成为redis的瓶颈，成为redis瓶颈的最有可能是机器内存的大小或者网络带宽，所以就使用了单线程进行实现；并且redis的单线程仅仅是指它在处理文件事件的时候是单线程的，在内部并不是单线程的，比如它的持久化就会创建新的线程工作



- 文件事件处理器使用IO多路复用程序来监听多个套接字，这样既实现了高性能的网络通信模型，又可以很好的与redis服务器中其它同样以单线程方式运行的模块进行对接



#### redis的io多路复用程序的实现

- redis为每个io多路复用函数库都实现了相同的api，所以io多路复用程序的底层实现是可以互换的，它包装了常见的select、epoll、evport、kqueue这些多路复用函数库