## 死锁

- 死锁的定义是：如果一组进程都在等待仅有该组进程中的其它进程才能引发的事件，那么这组进程就是死锁的

### 死锁产生的条件

- 死锁出现的原因通常是多个进程对不可抢占资源与可消耗性资源的争夺导致循环等待资源

1. 互斥条件，被抢占的资源在同一时间内仅能由一个进程使用
2. 请求和保持条件，进程在请求资源时，不会放弃已获取的资源
3. 不可抢占条件，进程已经获取的资源在使用完之前不可以被抢占
4. 循环等待条件，进程之间相互等待资源



### 解决死锁的方法

- 解决死锁无非就是破坏死锁产生的条件，而互斥条件是必须被保证的，不能破坏这个条件

- 预防死锁、避免死锁、检测死锁、解除死锁

#### 预防死锁

##### 破坏*请求和保持条件*

- 进程一次性获取所有所需资源
- 进程在请求其它资源前先释放已经使用完的资源

##### 破坏*不可抢占条件*

- 当一个已经持有某些不可抢占资源的进程再去获取其它不可抢占资源而的不到满足时，要先释放它已持有的不可抢占资源，等需要时再获取

##### 破坏*循环等待条件*

- 将所有资源进行线性排序，当进程想要获取序号低的资源的时候，必须要释放所有比这个序号高的所有资源



#### 避免死锁

- 避免死锁不是事先采取某种限制措施去破坏死锁产生条件，而是在资源动态分配的过程中，防止系统进入不安全状态，以避免发生死锁，比较著名的有**银行家算法**



#### 死锁检测与解除

- 提供死锁检测算法来检测死锁的发生，再提供一个死锁解除算法在发现死锁后解除死锁

##### 死锁检测

- 保存资源分配的请求和分配信息，并通过死锁检测算法判断有没有发生死锁

##### 解除死锁

- 通过抢占资源分配给死锁进程来解除死锁
- 终止一个或多个死锁进程以解除死锁