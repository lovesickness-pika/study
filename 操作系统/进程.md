#### 进程

##### 进程的描述

- **进程的定义**：进程是进程实体（程序）的一次运行过程，是系统进行资源分配和调度的一个独立单位

- 进程的基本特征

  - 动态性：进程实质是进程实体的运行过程
  - 并发性：多个进程实体同时存在于内存中，且可以同时运行
  - 独立性：传统OS中，独立性是指进程是一个能独立运行、独立获取资源和独立接受调度的基本单位
  - 异步性：进程异步运行，进程各自独立、以不可预知的速度运行

- 进程的三种基本状态

  - 就绪
  - 执行
  - 阻塞

  挂起原语Suspend与激活原语Active的引入：

  - 使进程处于静止状态

- **进程控制块PCB**

  - 作为进程实体的一部分，PCB记录了操作系统所需的，用于描述进程的当前情况以及管理进程运行的全部信息，是操作系统中重要的记录型数据结构
  - 进程的作用：将程序->进程
    1. 作为独立运行基本单位的标志
    2. 实现间断性运行
    3. 提供进程管理所需要的信息
    4. 提供进程调度所需要的信息
    5. 实现进程间通信
  - PCB的组成：
    - 进程标识符：包括外部标识符与内部标识符，前者方便进程（用户）对进程的访问，通常由字母+数字组成，后者方便系统对进程的访问，通常由数字组成，也代表进程的序号
    - 处理机状态：
      1. 通用寄存器
      2. 指针计数器
      3. 程序状态字PSW
      4. 用户栈指针
    - 进程调度信息
      1. 进程状态
      2. 进程优先级
      3. 进程调度的其他信息，如进程等待的时间，进程执行的时间等
      4. 事件：阻塞原因
    - 进程控制信息
      1. 程序和数据的地址
      2. 进程同步和通信机制
      3. 资源清单：运行期所需资源
      4. 链接地址：指向本队列中下一个进程的PCB首地址

##### 进程控制

- 操作系统内核

  - **管态**（系统态）：具有较高特权，能执行一切指令，访问所有寄存器和存储区
  - 目态（**用户态**）：具有较低特权，能执行规定的指令，访问指定的寄存器和存储区

  管态与用户态存在的意义：防止OS本身的数据或一些关键的数据被破坏

- 操作系统内核提供的最基本的支撑功能

  - 中断处理
  - 时钟管理
  - 原语操作：原语操作由若干指令组成，原语操作中的指令具有原子性，原语在执行过程中不允许被中断



GDT划分用户空间和内核空间

kernel提供系统调用，使用GDT划分空间保护内核

使用中断（由晶振器提供的）实现时分复用，cpu在每次中断，进行一次上下文切换（保护进程现场），根据进程调度运行下一个进程

INT 0x80 发生系统调用时cpu 的一个指令，发生系统调用就进行用户态与内核态的切换	

